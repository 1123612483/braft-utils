{"version":3,"sources":["../src/content.js"],"names":["selectionCollapsed","selectionState","isCollapsed","selectBlock","editorState","block","blockKey","getKey","EditorState","forceSelection","SelectionState","anchorKey","anchorOffset","focusKey","focusOffset","getLength","selectNextBlock","nextBlock","getCurrentContent","getBlockAfter","removeBlock","lastSelection","nextContentState","nextEditorState","Modifier","removeRange","setBlockType","getSelectionAfter","push","getSelectionBlock","getBlockForKey","getSelection","getAnchorKey","setSelectionBlockData","blockData","getSelectionBlockData","name","getData","get","getSelectionBlockType","getType","getSelectionText","contentState","currentContentBlock","start","getStartOffset","end","getEndOffset","getText","slice","toggleSelectionBlockType","blockType","RichUtils","toggleBlockType","getSelectionEntityData","type","entityKey","entity","getEntity","href","target","getSelectionInlineStyle","getCurrentInlineStyle","selectionHasInlineStyle","style","has","toUpperCase","toggleSelectionInlineStyle","stylesToBeRemoved","filter","item","currentInlineStyle","length","reduce","removeInlineStyle","toggleInlineStyle","removeSelectionInlineStyles","toggleSelectionAlignment","alignment","textAlign","undefined","toggleSelectionColor","color","replace","colorList","map","toggleSelectionBackgroundColor","toggleSelectionFontSize","fontSize","fontSizeList","toggleSelectionLineHeight","lineHeight","lineHeightList","toggleSelectionFontFamily","fontFamily","fontFamilyList","toggleSelectionLetterSpacing","letterSpacing","letterSpacingList","toggleSelectionIndent","indent","indentList","insertHorizontalLine","contentStateWithEntity","createEntity","getLastCreatedEntityKey","newEditorState","AtomicBlockUtils","insertAtomicBlock","toggleSelectionLink","entityData","toggleLink","set","currentContent","merge","insertText","error","console","warn","text","currentSelectedBlockType","replaceText","insertHTML","htmlString","rawContent","convertHTML","blockMap","tempColors","replaceWithFragment","insertMedias","medias","media","url","meta","setMediaData","data","mergeEntityData","removeMedia","mediaBlock","setMediaPosition","position","newPosition","float","clear","firstBlock","getFirstBlock","lastBlock","getLastBlock","allSelected","hasFocus","undo","redo"],"mappings":"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","file":"content.js","sourcesContent":["import { Modifier, EditorState, SelectionState, RichUtils, AtomicBlockUtils } from 'draft-js'\nimport { setBlockData, getSelectionEntity, removeAllInlineStyles } from 'draftjs-utils'\nimport { detectColorsFromHTMLString, detectColorsFromDraftState } from './colors'\n\nexport default {\n\n  selectionCollapsed (selectionState) {\n    return selectionState.isCollapsed()\n  },\n\n  selectBlock (editorState, block) {\n\n    const blockKey = block.getKey()\n\n    return EditorState.forceSelection(editorState, new SelectionState({\n      anchorKey: blockKey,\n      anchorOffset: 0,\n      focusKey: blockKey,\n      focusOffset: block.getLength()\n    }))\n\n  },\n\n  selectNextBlock (editorState, block) {\n    const nextBlock = editorState.getCurrentContent().getBlockAfter(block.getKey())\n    return nextBlock ? this.selectBlock(editorState, nextBlock) : editorState\n  },\n\n  removeBlock (editorState, block, lastSelection = null) {\n\n    let nextContentState, nextEditorState\n    const blockKey = block.getKey()\n\n    nextContentState = Modifier.removeRange(editorState.getCurrentContent(), new SelectionState({\n      anchorKey: blockKey,\n      anchorOffset: 0,\n      focusKey: blockKey,\n      focusOffset: block.getLength()\n    }), 'backward')\n\n    nextContentState = Modifier.setBlockType(nextContentState, nextContentState.getSelectionAfter(), 'unstyled')\n    nextEditorState = EditorState.push(editorState, nextContentState, 'remove-range')\n    return EditorState.forceSelection(nextEditorState, lastSelection || nextContentState.getSelectionAfter())\n\n  },\n\n  getSelectionBlock (editorState) {\n    return editorState.getCurrentContent().getBlockForKey(editorState.getSelection().getAnchorKey())\n  },\n\n  setSelectionBlockData (editorState, blockData) {\n    return setBlockData(editorState, blockData)\n  },\n\n  getSelectionBlockData (editorState, name) {\n    const blockData = this.getSelectionBlock(editorState).getData()\n    return name ? blockData.get(name) : blockData\n  },\n\n  getSelectionBlockType (editorState) {\n    return this.getSelectionBlock(editorState).getType()\n  },\n\n  getSelectionText (editorState) {\n\n    const selectionState = editorState.getSelection()\n    const contentState = editorState.getCurrentContent()\n\n    if (selectionState.isCollapsed() || this.getSelectionBlockType(editorState) === 'atomic') {\n      return ''\n    }\n\n    const anchorKey = selectionState.getAnchorKey()\n    const currentContentBlock = contentState.getBlockForKey(anchorKey)\n    const start = selectionState.getStartOffset()\n    const end = selectionState.getEndOffset()\n\n    return currentContentBlock.getText().slice(start, end);\n\n  },\n\n  toggleSelectionBlockType (editorState, blockType) {\n    return RichUtils.toggleBlockType(editorState, blockType)\n  },\n\n  getSelectionEntityData (editorState, type) {\n\n    const entityKey = getSelectionEntity(editorState)\n\n    if (entityKey) {\n      let entity = editorState.getCurrentContent().getEntity(entityKey)\n      if (entity && entity.get('type') === type) {\n        let { href, target } = entity.getData()\n        return { href, target }\n      } else {\n        return {}\n      }\n    } else {\n      return {}\n    }\n\n  },\n\n  getSelectionInlineStyle (editorState) {\n    return editorState.getCurrentInlineStyle()\n  },\n\n  selectionHasInlineStyle (editorState, style) {\n    return this.getSelectionInlineStyle(editorState).has(style.toUpperCase())\n  },\n\n  toggleSelectionInlineStyle (editorState, style, stylesToBeRemoved = []) {\n\n    const selectionState = editorState.getSelection()\n    const contentState = editorState.getCurrentContent()\n\n    if (selectionState.isCollapsed()) {\n      return editorState\n    }\n\n    style = style.toUpperCase()\n    stylesToBeRemoved = stylesToBeRemoved.filter(item => item !== style)\n\n    const currentInlineStyle = this.getSelectionInlineStyle(editorState)\n    const nextContentState = stylesToBeRemoved.length ? stylesToBeRemoved.reduce((contentState, item) => {\n      return Modifier.removeInlineStyle(contentState, selectionState, item) \n    }, contentState) : contentState\n\n    const nextEditorState = stylesToBeRemoved.length ? EditorState.push(editorState, nextContentState, 'change-inline-style') : editorState\n    return RichUtils.toggleInlineStyle(nextEditorState, style)\n\n  },\n\n  removeSelectionInlineStyles (editorState) {\n    return removeAllInlineStyles(editorState)\n  },\n\n  toggleSelectionAlignment (editorState, alignment) {\n    return this.setSelectionBlockData({\n      textAlign: this.getSelectionBlockData(editorState, 'textAlign') !== alignment ? alignment : undefined\n    })\n  },\n\n  toggleSelectionColor (editorState, color) {\n    return this.toggleSelectionInlineStyle(editorState, 'COLOR-' + color.replace('#', ''), this.colorList.map(item => 'COLOR-' + item.replace('#', '').toUpperCase()))\n  },\n\n  toggleSelectionBackgroundColor (editorState, color) {\n    return this.toggleSelectionInlineStyle(editorState, 'BGCOLOR-' + color.replace('#', ''), this.colorList.map(item => 'BGCOLOR-' + item.replace('#', '').toUpperCase()))\n  },\n\n  toggleSelectionFontSize (editorState, fontSize) {\n    return this.toggleSelectionInlineStyle(editorState, 'FONTSIZE-' + fontSize, this.fontSizeList.map(item => 'FONTSIZE-' + item))\n  },\n\n  toggleSelectionLineHeight (editorState, lineHeight) {\n    return this.toggleSelectionInlineStyle(editorState, 'LINEHEIGHT-' + lineHeight, this.lineHeightList.map(item => 'LINEHEIGHT-' + item))\n  },\n\n  toggleSelectionFontFamily (editorState, fontFamily) {\n    return this.toggleSelectionInlineStyle(editorState, 'FONTFAMILY-' + fontFamily, this.fontFamilyList.map(item => 'FONTFAMILY-' + item.name.toUpperCase()))\n  },\n\n  toggleSelectionLetterSpacing (editorState, letterSpacing) {\n    return this.toggleSelectionInlineStyle(editorState, 'LETTERSPACING-' + letterSpacing, this.letterSpacingList.map(item => 'LETTERSPACING-' + item))\n  },\n\n  toggleSelectionIndent (editorState, indent) {\n    return this.toggleSelectionInlineStyle(editorState, 'INDENT-' + indent, this.indentList.map(item => 'INDENT-' + item))\n  },\n\n  insertHorizontalLine (editorState) {\n\n    const selectionState = editorState.getSelection()\n    const contentState = editorState.getCurrentContent()\n\n    if (!selectionState.isCollapsed() || this.getSelectionBlockType(editorState) === 'atomic') {\n      return editorState\n    }\n\n    const contentStateWithEntity = contentState.createEntity('HR', 'IMMUTABLE', {})\n    const entityKey = contentStateWithEntity.getLastCreatedEntityKey()\n    const newEditorState = AtomicBlockUtils.insertAtomicBlock(editorState, entityKey, ' ')\n\n    return newEditorState\n\n  },\n\n  toggleSelectionLink (editorState, href, target) {\n\n    const selectionState = editorState.getSelection()\n    const contentState = editorState.getCurrentContent()\n\n    let entityData = { href, target }\n\n    if (selectionState.isCollapsed() || this.getSelectionBlockType(editorState) === 'atomic') {\n      return editorState\n    }\n\n    if (href === false) {\n      return RichUtils.toggleLink(editorState, selectionState, null)\n    }\n\n    if (href === null) {\n      delete entityData.href\n    }\n\n    try {\n\n      const nextContentState = contentState.createEntity('LINK', 'MUTABLE', entityData)\n      const entityKey = nextContentState.getLastCreatedEntityKey()\n\n      let nextEditorState = EditorState.set(editorState, {\n        currentContent: nextContentState\n      })\n\n      nextEditorState = RichUtils.toggleLink(nextEditorState, selectionState, entityKey)\n      nextEditorState = EditorState.forceSelection(nextEditorState, selectionState.merge({\n        anchorOffset: selectionState.getEndOffset(), \n        focusOffset: selectionState.getEndOffset()\n      }))\n\n      nextEditorState = EditorState.push(nextEditorState, Modifier.insertText(\n        nextEditorState.getCurrentContent(), nextEditorState.getSelection(), ' '\n      ), 'insert-text')\n\n      return nextEditorState\n\n    } catch (error) {\n      console.warn(error)\n    }\n\n  },\n\n  insertText (editorState, text, replace = true) {\n\n    const selectionState = editorState.getSelection()\n    const contentState = editorState.getCurrentContent()\n    const currentSelectedBlockType = this.getSelectionBlockType(editorState)\n\n    if (currentSelectedBlockType === 'atomic') {\n      return editorState\n    }\n\n    if (!selectionState.isCollapsed()) {\n      return replace ? EditorState.push(editorState, Modifier.replaceText(\n        contentState, selectionState, text\n      ), 'replace-text') : this\n    } else {\n      return EditorState.push(editorState, Modifier.insertText(\n        contentState, selectionState, text\n      ), 'insert-text')\n    }\n\n  },\n\n  insertHTML (editorState, htmlString) {\n\n    if (!htmlString) {\n      return editorState\n    }\n\n    const selectionState = editorState.getSelection()\n    const contentState = editorState.getCurrentContent()\n\n    try {\n\n      const rawContent = this.convertHTML(htmlString)\n      const { blockMap } = rawContent\n      const tempColors = detectColorsFromHTMLString(htmlString)\n\n      // this.addTempColors(tempColors)\n      // this.requestFocus()\n\n      return EditorState.push(editorState, Modifier.replaceWithFragment(\n        contentState, selectionState, blockMap\n      ), 'insert-fragment')\n\n    } catch (error) {\n      return editorState\n    }\n\n  },\n\n  insertMedias (editorState, medias = []) {\n\n    if (!medias.length) {\n      return editorState\n    }\n\n    if (this.getSelectionBlockType(editorState) === 'atomic') {\n      this.selectNextBlock(editorState, this.getSelectionBlock(editorState))\n    }\n\n    return medias.reduce((editorState, media) => {\n      const { url, name, type, meta } = media\n      const contentStateWithEntity = editorState.getCurrentContent().createEntity(type, 'IMMUTABLE', { url, name, type, meta })\n      const entityKey = contentStateWithEntity.getLastCreatedEntityKey()\n      return AtomicBlockUtils.insertAtomicBlock(editorState, entityKey, ' ')\n    }, editorState)\n\n  },\n\n  setMediaData (editorState, entityKey, data) {\n    return EditorState.push(editorState, editorState.getCurrentContent().mergeEntityData(entityKey, data), 'change-block-data')\n  },\n\n  removeMedia (editorState, mediaBlock) {\n    return this.removeBlock(editorState, mediaBlock)\n  },\n\n  setMediaPosition (editorState, mediaBlock, position) {\n\n    let newPosition = {}\n    const { float, alignment } = position\n\n    if (typeof float !== 'undefined') {\n      newPosition.float = mediaBlock.getData().get('float') === float ? null : float\n    }\n\n    if (typeof alignment !== 'undefined') {\n      newPosition.alignment = mediaBlock.getData().get('alignment') === alignment ? null : alignment\n    }\n\n    return this.setSelectionBlockData(this.selectBlock(editorState, mediaBlock), newPosition)\n\n  },\n\n  clear (editorState) {\n\n    const contentState = editorState.getCurrentContent()\n\n    const firstBlock = contentState.getFirstBlock()\n    const lastBlock = contentState.getLastBlock()\n\n    const allSelected = new SelectionState({\n      anchorKey: firstBlock.getKey(),\n      anchorOffset: 0,\n      focusKey: lastBlock.getKey(),\n      focusOffset: lastBlock.getLength(),\n      hasFocus: true\n    })\n\n    return EditorState.push(\n      editorState,\n      Modifier.removeRange(contentState, allSelected, 'backward'),\n      'remove-range'\n    )\n\n  },\n\n  undo (editorState) {\n    return EditorState.undo(editorState)\n  },\n\n  redo (editorState) {\n    return EditorState.redo(editorState)\n  }\n\n}"]}