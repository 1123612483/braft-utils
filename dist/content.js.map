{"version":3,"sources":["../src/content.js"],"names":["isEditorState","editorState","getSelection","getCurrentContent","createEmptyEditorState","editorDecorators","EditorState","createEmpty","createEditorState","contentState","createWithContent","isSelectionCollapsed","isCollapsed","selectBlock","block","blockKey","getKey","forceSelection","SelectionState","anchorKey","anchorOffset","focusKey","focusOffset","getLength","selectNextBlock","nextBlock","getBlockAfter","removeBlock","lastSelection","nextContentState","nextEditorState","Modifier","removeRange","setBlockType","getSelectionAfter","push","getSelectionBlock","getBlockForKey","getAnchorKey","setSelectionBlockData","blockData","getSelectionBlockData","name","getData","get","getSelectionBlockType","getType","getSelectionText","selectionState","currentContentBlock","start","getStartOffset","end","getEndOffset","getText","slice","toggleSelectionBlockType","blockType","RichUtils","toggleBlockType","getSelectionEntityData","type","entityKey","entity","getEntity","href","target","getSelectionInlineStyle","getCurrentInlineStyle","selectionHasInlineStyle","style","has","toUpperCase","toggleSelectionInlineStyle","stylesToBeRemoved","filter","item","currentInlineStyle","length","reduce","removeInlineStyle","toggleInlineStyle","removeSelectionInlineStyles","toggleSelectionAlignment","alignment","textAlign","undefined","toggleSelectionColor","color","colorList","replace","map","toggleSelectionBackgroundColor","toggleSelectionFontSize","fontSize","fontSizeList","toggleSelectionLineHeight","lineHeight","lineHeightList","toggleSelectionFontFamily","fontFamily","fontFamilyList","toggleSelectionLetterSpacing","letterSpacing","letterSpacingList","toggleSelectionIndent","indent","indentList","toggleSelectionLink","entityData","toggleLink","createEntity","getLastCreatedEntityKey","set","currentContent","merge","insertText","error","console","warn","text","currentSelectedBlockType","replaceText","insertHTML","htmlString","blockMap","replaceWithFragment","insertAtomicBlock","immutable","data","contentStateWithEntity","newEditorState","AtomicBlockUtils","insertHorizontalLine","insertMedias","medias","media","url","meta","setMediaData","mergeEntityData","removeMedia","mediaBlock","setMediaPosition","position","newPosition","float","clear","firstBlock","getFirstBlock","lastBlock","getLastBlock","allSelected","hasFocus","handleKeyCommand","command","handleNewLine","event","undo","redo"],"mappings":"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","file":"content.js","sourcesContent":["import { Modifier, EditorState, SelectionState, RichUtils, AtomicBlockUtils, convertFromRaw } from 'draft-js'\nimport { setBlockData, getSelectionEntity, removeAllInlineStyles, handleNewLine } from 'draftjs-utils'\nimport { detectColorsFromHTMLString, detectColorsFromDraftState } from './color'\nimport { convertHTMLToRaw } from 'braft-convert'\n\nexport default {\n\n  isEditorState (editorState) {\n    return editorState && editorState.getSelection && getSelection.getCurrentContent\n  },\n\n  createEmptyEditorState (editorDecorators) {\n    return EditorState.createEmpty(editorDecorators)\n  },\n\n  createEditorState (contentState, editorDecorators) {\n    return EditorState.createWithContent(contentState, editorDecorators)\n  },\n\n  isSelectionCollapsed (editorState) {\n    return editorState.getSelection().isCollapsed()\n  },\n\n  selectBlock (editorState, block) {\n\n    const blockKey = block.getKey()\n\n    return EditorState.forceSelection(editorState, new SelectionState({\n      anchorKey: blockKey,\n      anchorOffset: 0,\n      focusKey: blockKey,\n      focusOffset: block.getLength()\n    }))\n\n  },\n\n  selectNextBlock (editorState, block) {\n    const nextBlock = editorState.getCurrentContent().getBlockAfter(block.getKey())\n    return nextBlock ? this.selectBlock(editorState, nextBlock) : editorState\n  },\n\n  removeBlock (editorState, block, lastSelection = null) {\n\n    let nextContentState, nextEditorState\n    const blockKey = block.getKey()\n\n    nextContentState = Modifier.removeRange(editorState.getCurrentContent(), new SelectionState({\n      anchorKey: blockKey,\n      anchorOffset: 0,\n      focusKey: blockKey,\n      focusOffset: block.getLength()\n    }), 'backward')\n\n    nextContentState = Modifier.setBlockType(nextContentState, nextContentState.getSelectionAfter(), 'unstyled')\n    nextEditorState = EditorState.push(editorState, nextContentState, 'remove-range')\n    return EditorState.forceSelection(nextEditorState, lastSelection || nextContentState.getSelectionAfter())\n\n  },\n\n  getSelectionBlock (editorState) {\n    return editorState.getCurrentContent().getBlockForKey(editorState.getSelection().getAnchorKey())\n  },\n\n  setSelectionBlockData (editorState, blockData) {\n    return setBlockData(editorState, blockData)\n  },\n\n  getSelectionBlockData (editorState, name) {\n    const blockData = this.getSelectionBlock(editorState).getData()\n    return name ? blockData.get(name) : blockData\n  },\n\n  getSelectionBlockType (editorState) {\n    return this.getSelectionBlock(editorState).getType()\n  },\n\n  getSelectionText (editorState) {\n\n    const selectionState = editorState.getSelection()\n    const contentState = editorState.getCurrentContent()\n\n    if (selectionState.isCollapsed() || this.getSelectionBlockType(editorState) === 'atomic') {\n      return ''\n    }\n\n    const anchorKey = selectionState.getAnchorKey()\n    const currentContentBlock = contentState.getBlockForKey(anchorKey)\n    const start = selectionState.getStartOffset()\n    const end = selectionState.getEndOffset()\n\n    return currentContentBlock.getText().slice(start, end);\n\n  },\n\n  toggleSelectionBlockType (editorState, blockType) {\n    return RichUtils.toggleBlockType(editorState, blockType)\n  },\n\n  getSelectionEntityData (editorState, type) {\n\n    const entityKey = getSelectionEntity(editorState)\n\n    if (entityKey) {\n      let entity = editorState.getCurrentContent().getEntity(entityKey)\n      if (entity && entity.get('type') === type) {\n        let { href, target } = entity.getData()\n        return { href, target }\n      } else {\n        return {}\n      }\n    } else {\n      return {}\n    }\n\n  },\n\n  getSelectionInlineStyle (editorState) {\n    return editorState.getCurrentInlineStyle()\n  },\n\n  selectionHasInlineStyle (editorState, style) {\n    return this.getSelectionInlineStyle(editorState).has(style.toUpperCase())\n  },\n\n  toggleSelectionInlineStyle (editorState, style, stylesToBeRemoved = []) {\n\n    const selectionState = editorState.getSelection()\n    const contentState = editorState.getCurrentContent()\n\n    if (selectionState.isCollapsed()) {\n      return editorState\n    }\n\n    style = style.toUpperCase()\n    stylesToBeRemoved = stylesToBeRemoved.filter(item => item !== style)\n\n    const currentInlineStyle = this.getSelectionInlineStyle(editorState)\n    const nextContentState = stylesToBeRemoved.length ? stylesToBeRemoved.reduce((contentState, item) => {\n      return Modifier.removeInlineStyle(contentState, selectionState, item) \n    }, contentState) : contentState\n\n    const nextEditorState = stylesToBeRemoved.length ? EditorState.push(editorState, nextContentState, 'change-inline-style') : editorState\n    return RichUtils.toggleInlineStyle(nextEditorState, style)\n\n  },\n\n  removeSelectionInlineStyles (editorState) {\n    return removeAllInlineStyles(editorState)\n  },\n\n  toggleSelectionAlignment (editorState, alignment) {\n    return this.setSelectionBlockData(editorState, {\n      textAlign: this.getSelectionBlockData(editorState, 'textAlign') !== alignment ? alignment : undefined\n    })\n  },\n\n  toggleSelectionColor (editorState, color, colorList = []) {\n    return this.toggleSelectionInlineStyle(editorState, 'COLOR-' + color.replace('#', ''), colorList.map(item => 'COLOR-' + item.replace('#', '').toUpperCase()))\n  },\n\n  toggleSelectionBackgroundColor (editorState, color, colorList = []) {\n    return this.toggleSelectionInlineStyle(editorState, 'BGCOLOR-' + color.replace('#', ''), colorList.map(item => 'BGCOLOR-' + item.replace('#', '').toUpperCase()))\n  },\n\n  toggleSelectionFontSize (editorState, fontSize, fontSizeList = []) {\n    return this.toggleSelectionInlineStyle(editorState, 'FONTSIZE-' + fontSize, fontSizeList.map(item => 'FONTSIZE-' + item))\n  },\n\n  toggleSelectionLineHeight (editorState, lineHeight, lineHeightList = []) {\n    return this.toggleSelectionInlineStyle(editorState, 'LINEHEIGHT-' + lineHeight, lineHeightList.map(item => 'LINEHEIGHT-' + item))\n  },\n\n  toggleSelectionFontFamily (editorState, fontFamily, fontFamilyList = []) {\n    return this.toggleSelectionInlineStyle(editorState, 'FONTFAMILY-' + fontFamily, fontFamilyList.map(item => 'FONTFAMILY-' + item.name.toUpperCase()))\n  },\n\n  toggleSelectionLetterSpacing (editorState, letterSpacing, letterSpacingList = []) {\n    return this.toggleSelectionInlineStyle(editorState, 'LETTERSPACING-' + letterSpacing, letterSpacingList.map(item => 'LETTERSPACING-' + item))\n  },\n\n  toggleSelectionIndent (editorState, indent, indentList= []) {\n    return this.toggleSelectionInlineStyle(editorState, 'INDENT-' + indent, indentList.map(item => 'INDENT-' + item))\n  },\n\n  toggleSelectionLink (editorState, href, target) {\n\n    const selectionState = editorState.getSelection()\n    const contentState = editorState.getCurrentContent()\n\n    let entityData = { href, target }\n\n    if (selectionState.isCollapsed() || this.getSelectionBlockType(editorState) === 'atomic') {\n      return editorState\n    }\n\n    if (href === false) {\n      return RichUtils.toggleLink(editorState, selectionState, null)\n    }\n\n    if (href === null) {\n      delete entityData.href\n    }\n\n    try {\n\n      const nextContentState = contentState.createEntity('LINK', 'MUTABLE', entityData)\n      const entityKey = nextContentState.getLastCreatedEntityKey()\n\n      let nextEditorState = EditorState.set(editorState, {\n        currentContent: nextContentState\n      })\n\n      nextEditorState = RichUtils.toggleLink(nextEditorState, selectionState, entityKey)\n      nextEditorState = EditorState.forceSelection(nextEditorState, selectionState.merge({\n        anchorOffset: selectionState.getEndOffset(), \n        focusOffset: selectionState.getEndOffset()\n      }))\n\n      nextEditorState = EditorState.push(nextEditorState, Modifier.insertText(\n        nextEditorState.getCurrentContent(), nextEditorState.getSelection(), ' '\n      ), 'insert-text')\n\n      return nextEditorState\n\n    } catch (error) {\n      console.warn(error)\n      return editorState\n    }\n\n  },\n\n  insertText (editorState, text, replace = true) {\n\n    const selectionState = editorState.getSelection()\n    const contentState = editorState.getCurrentContent()\n    const currentSelectedBlockType = this.getSelectionBlockType(editorState)\n\n    if (currentSelectedBlockType === 'atomic') {\n      return editorState\n    }\n\n    if (!selectionState.isCollapsed()) {\n      return replace ? EditorState.push(editorState, Modifier.replaceText(\n        contentState, selectionState, text\n      ), 'replace-text') : editorState\n    } else {\n      return EditorState.push(editorState, Modifier.insertText(\n        contentState, selectionState, text\n      ), 'insert-text')\n    }\n\n  },\n\n  insertHTML (editorState, htmlString) {\n\n    if (!htmlString) {\n      return editorState\n    }\n\n    const selectionState = editorState.getSelection()\n    const contentState = editorState.getCurrentContent()\n\n    try {\n\n      const { blockMap } = convertFromRaw(convertHTMLToRaw(htmlString))\n\n      return EditorState.push(editorState, Modifier.replaceWithFragment(\n        contentState, selectionState, blockMap\n      ), 'insert-fragment')\n\n    } catch (error) {\n      console.warn(error)\n      return editorState\n    }\n\n  },\n\n  insertAtomicBlock (editorState, type, immutable = true, data = {}) {\n\n    const selectionState = editorState.getSelection()\n    const contentState = editorState.getCurrentContent()\n\n    if (!selectionState.isCollapsed() || this.getSelectionBlockType(editorState) === 'atomic') {\n      return editorState\n    }\n\n    const contentStateWithEntity = contentState.createEntity(type, immutable ? 'IMMUTABLE' : 'MUTABLE', data)\n    const entityKey = contentStateWithEntity.getLastCreatedEntityKey()\n    const newEditorState = AtomicBlockUtils.insertAtomicBlock(editorState, entityKey, ' ')\n\n    return newEditorState\n\n  },\n\n  insertHorizontalLine (editorState) {\n    return this.insertAtomicBlock(editorState, 'HR')\n  },\n\n  insertMedias (editorState, medias = []) {\n\n    if (!medias.length) {\n      return editorState\n    }\n\n    if (this.getSelectionBlockType(editorState) === 'atomic') {\n      this.selectNextBlock(editorState, this.getSelectionBlock(editorState))\n    }\n\n    return medias.reduce((editorState, media) => {\n      const { url, name, type, meta } = media\n      const contentStateWithEntity = editorState.getCurrentContent().createEntity(type, 'IMMUTABLE', { url, name, type, meta })\n      const entityKey = contentStateWithEntity.getLastCreatedEntityKey()\n      return AtomicBlockUtils.insertAtomicBlock(editorState, entityKey, ' ')\n    }, editorState)\n\n  },\n\n  setMediaData (editorState, entityKey, data) {\n    return EditorState.push(editorState, editorState.getCurrentContent().mergeEntityData(entityKey, data), 'change-block-data')\n  },\n\n  removeMedia (editorState, mediaBlock) {\n    return this.removeBlock(editorState, mediaBlock)\n  },\n\n  setMediaPosition (editorState, mediaBlock, position) {\n\n    let newPosition = {}\n    const { float, alignment } = position\n\n    if (typeof float !== 'undefined') {\n      newPosition.float = mediaBlock.getData().get('float') === float ? null : float\n    }\n\n    if (typeof alignment !== 'undefined') {\n      newPosition.alignment = mediaBlock.getData().get('alignment') === alignment ? null : alignment\n    }\n\n    return this.setSelectionBlockData(this.selectBlock(editorState, mediaBlock), newPosition)\n\n  },\n\n  clear (editorState) {\n\n    const contentState = editorState.getCurrentContent()\n\n    const firstBlock = contentState.getFirstBlock()\n    const lastBlock = contentState.getLastBlock()\n\n    const allSelected = new SelectionState({\n      anchorKey: firstBlock.getKey(),\n      anchorOffset: 0,\n      focusKey: lastBlock.getKey(),\n      focusOffset: lastBlock.getLength(),\n      hasFocus: true\n    })\n\n    return EditorState.push(\n      editorState,\n      Modifier.removeRange(contentState, allSelected, 'backward'),\n      'remove-range'\n    )\n\n  },\n\n  handleKeyCommand (editorState, command) {\n    return RichUtils.handleKeyCommand(editorState, command)\n  },\n\n  handleNewLine (editorState, event) {\n    return handleNewLine(editorState, event)\n  },\n\n  undo (editorState) {\n    return EditorState.undo(editorState)\n  },\n\n  redo (editorState) {\n    return EditorState.redo(editorState)\n  }\n\n}"]}